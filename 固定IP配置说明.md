# 图纸查询系统 - 固定IP访问配置

## 🌐 当前访问地址

### 局域网访问地址
```
http://192.168.14.122:5000
```

### 本机访问地址
```
http://localhost:5000
```

## 🔧 固定IP访问方案

### 方案1：使用静态IP（推荐）

#### 1.1 设置静态IP地址
1. 打开 **控制面板** → **网络和Internet** → **网络和共享中心**
2. 点击 **更改适配器设置**
3. 右键点击当前网络连接 → **属性**
4. 选择 **Internet协议版本4(TCP/IPv4)** → **属性**
5. 选择 **使用下面的IP地址**：
   - IP地址：`192.168.14.122`（当前IP）
   - 子网掩码：`255.255.255.0`
   - 默认网关：`192.168.14.1`（通常是路由器IP）
   - DNS服务器：`8.8.8.8` 和 `8.8.4.4`

#### 1.2 验证配置
```cmd
ipconfig /all
```

### 方案2：路由器DHCP保留（推荐）

#### 2.1 登录路由器管理界面
1. 浏览器访问：`http://192.168.14.1`（或路由器IP）
2. 输入管理员账号密码

#### 2.2 设置IP地址保留
1. 找到 **DHCP设置** 或 **地址保留**
2. 添加新的保留规则：
   - MAC地址：当前电脑的MAC地址
   - 保留IP：`192.168.14.122`
3. 保存设置并重启路由器

### 方案3：代码层面固定端口

#### 3.1 修改配置文件
在 `config.py` 中添加：
```python
# Web服务器配置
WEB_HOST = '0.0.0.0'  # 允许外部访问
WEB_PORT = 5000       # 固定端口
FIXED_IP = '192.168.14.122'  # 固定IP（可选）
```

#### 3.2 使用固定配置启动
```python
# 在 run_web.py 中使用固定配置
app.run(
    host='0.0.0.0',
    port=5000,  # 固定端口
    debug=False
)
```

## 📱 其他设备访问方法

### 手机/平板访问
1. 确保手机连接同一WiFi网络
2. 打开浏览器访问：`http://192.168.14.122:5000`

### 其他电脑访问
1. 确保在同一局域网内
2. 浏览器访问：`http://192.168.14.122:5000`

## 🔒 防火墙配置

### 自动配置（推荐）
运行管理员启动脚本：
```cmd
start_web_admin.bat
```

### 手动配置
```cmd
netsh advfirewall firewall add rule name="图纸查询系统Web端口" dir=in action=allow protocol=TCP localport=5000
```

## 🌍 外网访问方案（高级）

### 方案1：端口映射
1. 登录路由器管理界面
2. 找到 **端口转发** 或 **虚拟服务器**
3. 添加规则：
   - 外部端口：`8080`
   - 内部IP：`192.168.14.122`
   - 内部端口：`5000`
   - 协议：`TCP`

### 方案2：动态域名（DDNS）
1. 注册免费DDNS服务（如花生壳、No-IP）
2. 在路由器中配置DDNS
3. 通过域名访问：`http://你的域名:8080`

## 📋 访问地址汇总

| 访问方式 | 地址 | 说明 |
|---------|------|------|
| 本机访问 | `http://localhost:5000` | 仅本机可用 |
| 局域网访问 | `http://192.168.14.122:5000` | 同网络设备可用 |
| 固定域名 | `http://图纸系统.local:5000` | 需配置本地DNS |
| 外网访问 | `http://公网IP:8080` | 需端口映射 |

## ⚠️ 注意事项

1. **IP地址可能变化**：如果使用DHCP，IP可能会变化
2. **防火墙设置**：确保5000端口已开放
3. **网络环境**：确保所有设备在同一网络
4. **路由器设置**：某些路由器可能阻止设备间通信

## 🔧 故障排除

### 无法访问的常见原因
1. **防火墙阻止**：检查Windows防火墙设置
2. **IP地址变化**：使用 `ipconfig` 查看当前IP
3. **端口被占用**：使用 `netstat -an | findstr :5000` 检查
4. **网络隔离**：检查路由器AP隔离设置

### 检查命令
```cmd
# 查看当前IP地址
ipconfig

# 检查端口状态
netstat -an | findstr :5000

# 测试网络连通性
ping 192.168.14.122
```

## 💡 推荐配置

**最佳实践**：
1. 使用路由器DHCP保留固定IP
2. 配置防火墙规则
3. 设置简单的本地域名
4. 定期检查网络配置

这样可以确保访问地址始终是：`http://192.168.14.122:5000`